{
    "template": {
        "template_json": "{\"$schema\":\"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\"contentVersion\":\"1.0.0.0\",\"parameters\":{\"location\":{\"type\":\"string\"},\"networkInterfaceName1\":{\"type\":\"string\"},\"enableAcceleratedNetworking\":{\"type\":\"bool\"},\"subnetName\":{\"type\":\"string\"},\"virtualNetworkId\":{\"type\":\"string\"},\"publicIpAddressName1\":{\"type\":\"string\"},\"publicIpAddressType\":{\"type\":\"string\"},\"publicIpAddressSku\":{\"type\":\"string\"},\"pipDeleteOption\":{\"type\":\"string\"},\"virtualMachineName\":{\"type\":\"string\"},\"virtualMachineName1\":{\"type\":\"string\"},\"virtualMachineComputerName1\":{\"type\":\"string\"},\"virtualMachineRG\":{\"type\":\"string\"},\"osDiskType\":{\"type\":\"string\"},\"osDiskDeleteOption\":{\"type\":\"string\"},\"virtualMachineSize\":{\"type\":\"string\"},\"nicDeleteOption\":{\"type\":\"string\"},\"hibernationEnabled\":{\"type\":\"bool\"},\"adminUsername\":{\"type\":\"string\"},\"patchMode\":{\"type\":\"string\"},\"rebootSetting\":{\"type\":\"string\"},\"securityType\":{\"type\":\"string\"},\"secureBoot\":{\"type\":\"bool\"},\"vTPM\":{\"type\":\"bool\"},\"virtualMachine1Zone\":{\"type\":\"string\"}},\"variables\":{\"vnetId\":\"[parameters('virtualNetworkId')]\",\"vnetName\":\"[last(split(variables('vnetId'), '/'))]\",\"subnetRef\":\"[concat(variables('vnetId'), '/subnets/', parameters('subnetName'))]\"},\"resources\":[{\"name\":\"[parameters('networkInterfaceName1')]\",\"type\":\"Microsoft.Network/networkInterfaces\",\"apiVersion\":\"2022-11-01\",\"location\":\"[parameters('location')]\",\"dependsOn\":[\"[concat('Microsoft.Network/publicIpAddresses/', parameters('publicIpAddressName1'))]\"],\"properties\":{\"ipConfigurations\":[{\"name\":\"ipconfig1\",\"properties\":{\"subnet\":{\"id\":\"[variables('subnetRef')]\"},\"privateIPAllocationMethod\":\"Dynamic\",\"publicIpAddress\":{\"id\":\"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', parameters('publicIpAddressName1'))]\",\"properties\":{\"deleteOption\":\"[parameters('pipDeleteOption')]\"}}}}],\"enableAcceleratedNetworking\":\"[parameters('enableAcceleratedNetworking')]\"}},{\"name\":\"[parameters('publicIpAddressName1')]\",\"type\":\"Microsoft.Network/publicIpAddresses\",\"apiVersion\":\"2020-08-01\",\"location\":\"[parameters('location')]\",\"properties\":{\"publicIpAllocationMethod\":\"[parameters('publicIpAddressType')]\"},\"sku\":{\"name\":\"[parameters('publicIpAddressSku')]\"},\"zones\":[\"[parameters('virtualMachine1Zone')]\"]},{\"name\":\"[parameters('virtualMachineName1')]\",\"type\":\"Microsoft.Compute/virtualMachines\",\"apiVersion\":\"2024-03-01\",\"location\":\"[parameters('location')]\",\"dependsOn\":[\"[concat('Microsoft.Network/networkInterfaces/', parameters('networkInterfaceName1'))]\"],\"properties\":{\"hardwareProfile\":{\"vmSize\":\"[parameters('virtualMachineSize')]\"},\"storageProfile\":{\"osDisk\":{\"createOption\":\"fromImage\",\"managedDisk\":{\"storageAccountType\":\"[parameters('osDiskType')]\"},\"deleteOption\":\"[parameters('osDiskDeleteOption')]\"},\"imageReference\":{\"publisher\":\"canonical\",\"offer\":\"0001-com-ubuntu-server-focal\",\"sku\":\"20_04-lts-gen2\",\"version\":\"latest\"}},\"networkProfile\":{\"networkInterfaces\":[{\"id\":\"[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaceName1'))]\",\"properties\":{\"deleteOption\":\"[parameters('nicDeleteOption')]\"}}]},\"additionalCapabilities\":{\"hibernationEnabled\":false},\"osProfile\":{\"computerName\":\"[parameters('virtualMachineComputerName1')]\",\"adminUsername\":\"[parameters('adminUsername')]\",\"linuxConfiguration\":{\"disablePasswordAuthentication\":true,\"patchSettings\":{\"patchMode\":\"[parameters('patchMode')]\",\"automaticByPlatformSettings\":{\"rebootSetting\":\"[parameters('rebootSetting')]\"}}}},\"securityProfile\":{\"securityType\":\"[parameters('securityType')]\",\"uefiSettings\":{\"secureBootEnabled\":\"[parameters('secureBoot')]\",\"vTpmEnabled\":\"[parameters('vTPM')]\"}},\"diagnosticsProfile\":{\"bootDiagnostics\":{\"enabled\":true}}},\"identity\":{\"type\":\"systemAssigned\"},\"zones\":[\"[parameters('virtualMachine1Zone')]\"]}],\"outputs\":{\"adminUsername\":{\"type\":\"string\",\"value\":\"[parameters('adminUsername')]\"}}}"
    },
    "parameters": {
        "parameters_json": "{\"location\":\"eastus\",\"networkInterfaceName1\":\"vm-276_z1\",\"enableAcceleratedNetworking\":true,\"subnetName\":\"default\",\"virtualNetworkId\":\"/subscriptions/443b0799-279f-401e-a220-aa1463a7710f/resourceGroups/vsk-demo-rg/providers/Microsoft.Network/virtualNetworks/new-vnet\",\"publicIpAddressName1\":\"vm-2-ip\",\"publicIpAddressType\":\"Static\",\"publicIpAddressSku\":\"Standard\",\"pipDeleteOption\":\"Delete\",\"virtualMachineName\":\"vm-2\",\"virtualMachineName1\":\"vm-2\",\"virtualMachineComputerName1\":\"vm-2\",\"virtualMachineRG\":\"vsk-demo-rg\",\"osDiskType\":\"Premium_LRS\",\"osDiskDeleteOption\":\"Delete\",\"virtualMachineSize\":\"Standard_D2lds_v5\",\"nicDeleteOption\":\"Delete\",\"hibernationEnabled\":false,\"adminUsername\":\"azureuser\",\"patchMode\":\"AutomaticByPlatform\",\"rebootSetting\":\"IfRequired\",\"securityType\":\"TrustedLaunch\",\"secureBoot\":true,\"vTPM\":true,\"virtualMachine1Zone\":\"1\"}"
    }

}
